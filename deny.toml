# Project policies.
#
# These policies can be enforced using `cargo deny check`.

[advisories]
ignore = [
    # `ansi_term` is unmaintained (dependency of structopt). Should upgrade to clap.
    "RUSTSEC-2021-0139",
    # `atty` is unmaintained and has potential unaligned read (dependency of structopt).
    "RUSTSEC-2021-0145",
    "RUSTSEC-2024-0375",
    # `backoff` is unmaintained. Consider switching to `backon`.
    "RUSTSEC-2025-0012",
    # `instant` is unmaintained (dependency of backoff).
    "RUSTSEC-2024-0384",
    # `proc-macro-error` is unmaintained (dependency of structopt).
    "RUSTSEC-2024-0370",
]

[licenses]
# Allow common non-restrictive licenses. ISC is used for various DNS and crypto
# things, and it's a minimally restrictive open source license.
# Licenses not in this list will be denied (including copyleft and AGPL).
allow = ["MIT", "Apache-2.0", "BSD-3-Clause", "BSD-2-Clause", "CC0-1.0", "ISC", "OpenSSL", "Zlib", "Unicode-3.0", "Unicode-DFS-2016"]

[[licenses.clarify]]
# Ring has a messy license.
name = "ring"
expression = "ISC AND OpenSSL AND MIT"
license-files = [
    { path = "LICENSE", hash = 3171872035 },
]

[bans]
# Warn about multiple versions of the same crate, unless we've indicated otherwise below.
multiple-versions = "warn"

deny = [
    # OpenSSL has caused endless deployment and build problems, and we want
    # nothing to do with it, in any version. Unforunately, `diesel` depends on
    # `libpq`, which depends on OpenSSL at the C level. So we ban `openssl`
    # (used from Rust), but we keep `openssl-sys` so we can do some linker
    # tricks with `extern crate`.
    { name = "openssl" },
]

skip = [
]

skip-tree = [
    # Build-only dependency uses some stale crates.
    { name = "pest_meta" },
    # We're never running on top of a real WASI platform, so just ignore it.
    { name = "wasi"},
]

